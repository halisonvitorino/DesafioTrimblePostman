name: Automated API tests using Postman CLI

on: push

jobs:
  automated-api-tests:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
      
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '14'
            
      - name: Install Postman CLI
        run: |
          npm install -g postman-cli
          postman --version
        
      - name: Run API tests
        run: |
          postman collection run "10042706-885a52af-fa17-4294-9078-1d56732dea89"
          env: 
            POSTMAN_API_KEY: ${{ secrets.POSTMAN_API_KEY }}
            
